{% extends 'marco.html' %}

{% block title %}Perfil de Candidato | {{ candidato.nombre }} {{ candidato.apellido_p }}{% endblock %}

{% block extra_css %}
<style>
    /* Tarjeta Principal */
    .candidate-profile-card {
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        overflow: hidden;
        border: 1px solid #e9ecef;
    }

    /* Header con degradado suave */
    .profile-header-bg {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        padding: 30px;
        border-bottom: 1px solid #dee2e6;
    }

    .avatar-large {
        width: 90px;
        height: 90px;
        background-color: white;
        color: #0d6efd;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 800;
        font-size: 2.5rem;
        border: 4px solid white;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    /* Secciones de Datos */
    .info-section {
        padding: 30px;
    }

    .data-group {
        margin-bottom: 25px;
    }
    
    .data-label {
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: #6c757d;
        font-weight: 700;
        margin-bottom: 5px;
        display: block;
    }
    
    .data-value {
        font-size: 1rem;
        color: #212529;
        font-weight: 500;
    }

    /* Tags */
    .skill-badge {
        background-color: #f1f3f5;
        color: #495057;
        padding: 5px 12px;
        border-radius: 6px;
        font-size: 0.9rem;
        margin-right: 5px;
        margin-bottom: 5px;
        display: inline-block;
        font-weight: 500;
        border: 1px solid #dee2e6;
    }
    .soft-badge {
        background-color: #e7f1ff;
        color: #0d6efd;
        border-color: #cce5ff;
    }

    /* Botones de Acción */
    .action-bar {
        background-color: #f8f9fa;
        padding: 20px 30px;
        border-top: 1px solid #e9ecef;
        display: flex;
        justify-content: flex-end;
        gap: 10px;
    }
</style>
{% endblock %}

{% block content %}

<div class="container-fluid px-0">
    
    <!-- Breadcrumb / Navegación -->
    <div class="mb-4">
        <!-- Puedes usar 'history.back()' para volver a la lista de postulantes -->
        <a href="javascript:history.back()" class="text-decoration-none text-muted small">
            <i class="bi bi-arrow-left me-1"></i> Volver a Postulantes
        </a>
        <h2 class="fw-bold text-dark mt-2">Perfil del Candidato</h2>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-10">
            
            <div class="candidate-profile-card">
                
                <!-- 1. Encabezado del Candidato -->
                <div class="profile-header-bg">
                    <div class="d-flex align-items-center gap-4">
                        <!-- Avatar -->
                        <div class="avatar-large">
                            {{ candidato.nombre|slice:":1" }}{{ candidato.apellido_p|slice:":1" }}
                        </div>
                        
                        <!-- Info Principal -->
                        <div class="flex-grow-1">
                            <h3 class="fw-bold mb-1">{{ candidato.nombre }} {{ candidato.apellido_p }} {{ candidato.apellido_m }}</h3>
                            <p class="text-primary fw-bold mb-2 fs-5">
                                {{ candidato.titulo|default:"Profesional" }}
                            </p>
                            
                            <div class="d-flex flex-wrap gap-3 text-muted small">
                                <span><i class="bi bi-geo-alt-fill me-1"></i> {{ candidato.nacionalidad }}</span>
                                {% if candidato.movilidad_limitada %}
                                    <span class="text-primary fw-bold"><i class="bi bi-universal-access me-1"></i> Movilidad Limitada</span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. Cuerpo de Información -->
                <div class="info-section">
                    <div class="row">
                        
                        <!-- Columna Izquierda: Perfil Profesional -->
                        <div class="col-md-7 border-end">
                            <h5 class="fw-bold text-dark mb-4 border-bottom pb-2">Perfil Profesional</h5>
                            
                            <div class="data-group">
                                <span class="data-label">Formación Académica</span>
                                <div class="data-value">{{ estudios_texto }}</div>
                                {% if candidato.titulo %}
                                    <small class="text-muted">{{ candidato.titulo }}</small>
                                {% endif %}
                            </div>

                            <div class="data-group">
                                <span class="data-label">Última Experiencia Laboral</span>
                                <div class="data-value text-primary mb-1">{{ area_ocup_texto }}</div>
                                <div class="text-muted small"><i class="bi bi-clock me-1"></i> {{ experiencia_texto }}</div>
                                <p class="mt-2 text-muted fst-italic small bg-light p-3 rounded">
                                    "{{ candidato.descripcion_exp|default:'Sin descripción detallada.' }}"
                                </p>
                            </div>

                            <div class="data-group mt-4">
                                <span class="data-label mb-2">Habilidades Técnicas (Hard Skills)</span>
                                <div>
                                    {% for skill in hard_skills %}
                                        <span class="skill-badge">{{ skill }}</span>
                                    {% empty %}
                                        <span class="text-muted small">No especificadas</span>
                                    {% endfor %}
                                </div>
                            </div>

                            <div class="data-group">
                                <span class="data-label mb-2">Habilidades Blandas (Soft Skills)</span>
                                <div>
                                    {% for skill in soft_skills %}
                                        <span class="skill-badge soft-badge">{{ skill }}</span>
                                    {% empty %}
                                        <span class="text-muted small">No especificadas</span>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>

                        <!-- Columna Derecha: Contacto y Bio -->
                        <div class="col-md-5 ps-md-4">
                            <h5 class="fw-bold text-dark mb-4 border-bottom pb-2">Información de Contacto</h5>
                            
                            <div class="data-group">
                                <span class="data-label">Correo Electrónico</span>
                                <div class="d-flex align-items-center">
                                    <i class="bi bi-envelope text-primary me-2 fs-5"></i>
                                    <a href="mailto:{{ candidato.email }}" class="data-value text-decoration-none">{{ candidato.email }}</a>
                                </div>
                            </div>

                            <div class="data-group">
                                <span class="data-label">Teléfono</span>
                                <div class="d-flex align-items-center">
                                    <i class="bi bi-telephone text-success me-2 fs-5"></i>
                                    <span class="data-value">{{ candidato.telefono|default:"No registrado" }}</span>
                                </div>
                            </div>

                            <div class="data-group mt-5">
                                <span class="data-label">Sobre Mí</span>
                                <p class="text-muted small" style="line-height: 1.6;">
                                    {{ candidato.biografia|default:"El candidato no ha añadido una biografía."|linebreaksbr }}
                                </p>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- 3. Barra de Acciones -->
                <div class="action-bar">
                    <a href="mailto:{{ candidato.email }}" class="btn btn-primary">
                        <i class="bi bi-envelope-fill me-2"></i>Enviar Correo
                    </a>
                    {% if candidato.telefono %}
                        <a href="tel:{{ candidato.telefono }}" class="btn btn-outline-success">
                            <i class="bi bi-whatsapp me-2"></i>Llamar / WhatsApp
                        </a>
                    {% endif %}
                </div>

            </div>

        </div>
    </div>

</div>

{% endblock %}